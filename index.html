<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Escape The Upside Down</title>
<style>
body { margin:0; background:black; color:white; text-align:center; }
canvas { background:#111; display:block; margin:auto; image-rendering:pixelated; }
</style>
</head>
<body>

<h1>ESCAPE THE UPSIDE DOWN</h1>
<canvas id="game" width="800" height="500"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

const TILE = 40;

const map = [
[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,1],
[1,0,1,1,1,1,0,0,0,1,1,1,1,0,0,1,1,1,0,1],
[1,0,0,0,0,1,0,0,0,1,0,0,1,0,0,0,0,1,0,1],
[1,0,1,1,0,1,0,0,0,1,0,0,1,1,1,1,0,1,0,1],
[1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1],
[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
];

let player = { x: TILE*1, y: TILE*1, size: 30 };
let keys = {};

document.addEventListener("keydown", e => keys[e.key.toLowerCase()] = true);
document.addEventListener("keyup", e => keys[e.key.toLowerCase()] = false);

function canMove(nx, ny) {
let col = Math.floor(nx / TILE);
let row = Math.floor(ny / TILE);
return map[row][col] !== 1;
}

function update() {
let speed = 3;

if(keys["w"] && canMove(player.x, player.y-speed)) player.y -= speed;
if(keys["s"] && canMove(player.x, player.y+speed)) player.y += speed;
if(keys["a"] && canMove(player.x-speed, player.y)) player.x -= speed;
if(keys["d"] && canMove(player.x+speed, player.y)) player.x += speed;

let goalCol = 18;
let goalRow = 1;

if(Math.floor(player.x/TILE) === goalCol &&
   Math.floor(player.y/TILE) === goalRow){
   alert("YOU ESCAPED THE UPSIDE DOWN!");
   location.reload();
}
}

function drawMap(){
for(let r=0;r<map.length;r++){
for(let c=0;c<map[r].length;c++){
if(map[r][c]===1){
ctx.fillStyle="#333";
}else if(map[r][c]===3){
ctx.fillStyle="purple";
}else{
ctx.fillStyle="#111";
}
ctx.fillRect(c*TILE,r*TILE,TILE,TILE);
}
}
}

function drawPlayer(){
ctx.fillStyle="cyan";
ctx.fillRect(player.x,player.y,player.size,player.size);
}

function loop(){
ctx.clearRect(0,0,canvas.width,canvas.height);
update();
drawMap();
drawPlayer();
requestAnimationFrame(loop);
}

loop();
</script>

</body>
</html>
